import works from"/data/works.js";import isMobileAndTablet from"/utils/isMobileAndTablet.js";export default class Works{static get selector(){return".works"}constructor(e){this.block=e,this.workTemplate=this.block.querySelector("#work"),this.imageTemplate=this.block.querySelector("#work-image"),this.awardsTemplate=this.block.querySelector("#work-awards"),this.linksTemplate=this.block.querySelector("#work-links"),this.works=works,this.setupWorks=this.setupWorks.bind(this),this.setupWork=this.setupWork.bind(this),this.setupWorkAwards=this.setupWorkAwards.bind(this),this.setupWorkLinks=this.setupWorkLinks.bind(this),this.setupWorks()}setupWorks(){this.works.forEach((e,t)=>{let a=this.setupWork(e);if(e.images.forEach((e,r)=>{if(e.noMobile&&isMobileAndTablet)return;let s=this.setupWorkImage(e,t,r);a.querySelector(".works__work__images__wrapper").appendChild(s)}),e.awards&&e.awards.forEach(e=>{let t=this.setupWorkAwards(e);a.querySelector(".works__work").appendChild(t[0]),a.querySelector(".works__work__header").appendChild(t[1])}),e.link||e.partner){let t=this.setupWorkLinks(e);a.querySelector(".works__work").appendChild(t[0]),a.querySelector(".works__work__header").appendChild(t[1])}this.block.appendChild(a)}),this.imageTemplate.remove(),this.awardsTemplate.remove(),this.linksTemplate.remove(),this.workTemplate.remove()}onReady(){window.App.initClones()}setupWork(e){let t=this.workTemplate.content.querySelector(".works__work");t.querySelector("h3").textContent=`${e.name}`;let a=t.querySelector("h4");e.types.forEach(e=>{let t=document.createElement("span");t.classList.add("animated-text__wrapper");let r=document.createElement("span");r.classList.add("animated-text__row"),r.textContent=e,t.appendChild(r),a.appendChild(t)});let r=document.importNode(this.workTemplate.content,!0);return a.innerHTML="",r}setupWorkImage(e,t,a){let r=this.imageTemplate.content.querySelector(".works__work__images__image img");return r.src=`/assets/Images/works/${e.name}`,r.alt="",document.importNode(this.imageTemplate.content,!0)}setupWorkAwards(e){let t=this.awardsTemplate.content.querySelector(".works__work__awards"),a=document.createElement("p");a.dataset.splitted="true",a.classList.add("animated-text");let r=document.createElement("a");r.textContent=e.institution,r.href=e.url,r.target="_blank",r.rel="noopener",r.classList.add("animated-text__row"),r.classList.add("underlined");let s=document.createElement("span");s.classList.add("animated-text__wrapper"),s.appendChild(r),a.appendChild(s),e.recognitions.forEach(e=>{let t=document.createElement("span");t.classList.add("animated-text__row"),t.textContent=`${e.name} / ${e.date}`;let r=document.createElement("span");r.classList.add("animated-text__wrapper"),r.appendChild(t),a.appendChild(r)}),t.appendChild(a);let n=document.importNode(this.awardsTemplate.content,!0),o=document.importNode(this.awardsTemplate.content,!0);return a.innerHTML="",[n,o]}setupWorkLinks(e){let t=this.linksTemplate.content.querySelector(".works__work__links");if(e.link){let a=document.createElement("p");a.classList.add("animated-text"),a.dataset.splitted="true";let r=document.createElement("span");r.classList.add("animated-text__wrapper");let s=document.createElement("a");s.textContent=e.link.text,s.href=e.link.href,s.target="_blank",s.rel="noopener",s.classList.add("underlined"),s.classList.add("animated-text__row"),r.appendChild(s),a.appendChild(r),t.appendChild(a)}if(e.partner){let a=document.createElement("p");a.classList.add("animated-text"),a.dataset.splitted="true";let r=document.createElement("span");r.classList.add("animated-text__wrapper");let s=document.createElement("span");s.classList.add("animated-text__row"),s.textContent=e.partner.role;let n=document.createElement("a");n.textContent=e.partner.name,n.href=e.partner.url,n.target="_blank",n.rel="noopener",n.classList.add("underlined"),s.appendChild(n),r.appendChild(s),a.appendChild(r),t.appendChild(a)}return[document.importNode(this.linksTemplate.content,!0),document.importNode(this.linksTemplate.content,!0)]}}