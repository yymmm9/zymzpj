import clamp from"/utils/clamp.js";import{easeOutQuint}from"/utils/easing.js";export default class AnimatedWord{static get selector(){return".animated-word"}constructor(t){this.block=t,this.transitionDuration=1e3,this.word=this.block.textContent,this.onReady=this.onReady.bind(this),this.show=this.show.bind(this),this.animate=this.animate.bind(this),this.setupWord=this.setupWord.bind(this)}onReady(){this.raf=[],this.animationStartTimestamp=[],this.letters=[],this.setupWord()}setupWord(){this.block.textContent="",this.word.split("").forEach(t=>{let i=document.createElement("div");i.classList.add("animated-word__letter-wrapper");let s=document.createElement("span");s.classList.add("animated-word__letter"),s.style.transform="translate3d(0, 100%, 0)",s.textContent=t,i.appendChild(s),this.block.appendChild(i),this.letters.push(s)})}animate(t,i,s){this.animationStartTimestamp[s]||(this.animationStartTimestamp[s]=t);let a=easeOutQuint(clamp((t-this.animationStartTimestamp[s])/this.transitionDuration,0,1));i.style.transform=`translate3d(0, ${110*(1-a)}%, 0)`,a<1?this.raf[s]=window.requestAnimationFrame(t=>{this.animate(t,i,s)}):(this.animationStartTimestamp[s]=null,window.cancelAnimationFrame(this.raf[s]),this.isShowing=!1)}show(){this.isShowing=!0,this.letters.forEach((t,i)=>{setTimeout(()=>{this.raf[i]=window.requestAnimationFrame(s=>{this.animate(s,t,i)})},80*i)})}onResize(){}}