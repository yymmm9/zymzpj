import{getInstance}from"/index.js";import mobileAndTabletcheck from"/utils/isMobileAndTablet.js";import{easeInOutQuint}from"/utils/easing.js";import clamp from"/utils/clamp.js";export default class Anchor{static get selector(){return".anchor-link"}constructor(t){this.block=t,this.target=t.dataset.target,this.transitionDuration=1600,this.onClick=this.onClick.bind(this),this.onReady=this.onReady.bind(this),this.scrollTo=this.scrollTo.bind(this),this.block.addEventListener("click",this.onClick)}onReady(){const t=document.querySelector(".smooth-scroll");this.smoothScroll=getInstance(t)}onClick(t){if(t.preventDefault(),!this.target)return;const i=document.getElementById(this.target).getBoundingClientRect().top;mobileAndTabletcheck?window.requestAnimationFrame(t=>{this.scrollTo(t,i,window.scrollY)}):this.smoothScroll.updateValue(i)}scrollTo(t,i,o){this.isAnimating=!0,this.animationStartTimestamp||(this.animationStartTimestamp=t);let s=easeInOutQuint(clamp((t-this.animationStartTimestamp)/this.transitionDuration,0,1));window.scrollTo(0,o+i*s),s<1?this.raf=window.requestAnimationFrame(t=>{this.scrollTo(t,i,o)}):(window.cancelAnimationFrame(this.raf),this.raf=null,this.animationStartTimestamp=null)}}