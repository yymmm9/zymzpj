import{getInstance}from"/index.js";export default class Works{static get selector(){return".unsplash"}constructor(e){this.block=e,this.viewsNode=e.querySelector(".unsplash__views"),this.imagesWrapper=e.querySelector(".unsplash__carousel__images__wrapper"),this.imageTemplate=e.querySelector("#unsplash-image"),this.carousel=e.querySelector(".unsplash__carousel__images"),this.listeners=[],fetch("https://api.unsplash.com/users/marcocalignano/statistics/?client_id=bsDaR_4Q8BA3k3ANJX0ZxnP1g3N9f0SDlu2YsSBcWzQ").then(e=>e.json()).then(e=>{let s=e.views.total;s=new Intl.NumberFormat("de-DE").format(s),this.viewsNode.innerHTML=`I've <span>${s}*</span>`,this.listeners.forEach(e=>{e()})}),fetch("https://api.unsplash.com/users/marcocalignano/photos/?client_id=bsDaR_4Q8BA3k3ANJX0ZxnP1g3N9f0SDlu2YsSBcWzQ&order_by=popular").then(e=>e.json()).then(e=>{e.forEach((e,s)=>{if(1===s)return;let t=this.setupUnsplashImage(e);this.imagesWrapper.appendChild(t)}),this.imageTemplate.remove()}).then(()=>{this.carousel.classList.add("draggable-carousel"),window.App.initClones()}).then(()=>{const e=getInstance(this.carousel);e&&e.onReady&&e.onReady(),this.block.querySelectorAll(".draggable-carousel__image-wrapper").forEach(e=>{const s=getInstance(e);s&&s.onReady&&s.onReady()})})}setupUnsplashImage(e){let s=this.imageTemplate.content.querySelector(".unsplash__carousel__images__image img");return s.src=`${e.urls.regular}`,s.alt=e.alt_description,document.importNode(this.imageTemplate.content,!0)}listen(e){this.listeners.push(e)}}